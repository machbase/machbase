---
title: íŒŒí˜• ë°ì´í„° ë§Œë“¤ê¸°
type: docs
weight: 10
---

ì´ íŠœí† ë¦¬ì–¼ì€ ìˆœìˆ˜ ì…¸ ìŠ¤í¬ë¦½íŠ¸ë§Œìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„°ë¥¼ ì“°ê³  ì½ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

{{< callout emoji="ğŸ“Œ">}}
ì˜ˆì‹œë¥¼ ì§„í–‰í•˜ë ¤ë©´ ì•„ë˜ í…Œì´ë¸”ì„ ë¯¸ë¦¬ ìƒì„±í•´ ë‘ì–´ì•¼ í•©ë‹ˆë‹¤.
{{< /callout >}}

```sql
CREATE TAG TABLE IF NOT EXISTS EXAMPLE  (
    NAME VARCHAR(20) PRIMARY KEY,
    TIME DATETIME BASETIME,
    VALUE DOUBLE SUMMARIZED
);
``` 

## ë°ì´í„° ì“°ê¸°

machbase-neoì— ë°ì´í„°ë¥¼ ì“°ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ ëª…ë ¹ì¤„ ë„êµ¬ `machbase-neo shell`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
ì´ ë„êµ¬ë¥¼ ì´ìš©í•´ í…Œì´ë¸”ì„ ê°€ì ¸ì˜¤ê³ (import), ë‚´ë³´ë‚´ê³ (export), ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë°ì´í„° ìƒì„±

ì˜ˆì‹œì—ì„œëŠ” 1ì´ˆë§ˆë‹¤ ì‚¬ì¸/ì½”ì‚¬ì¸ê°’ì„ ì¶œë ¥í•˜ëŠ” ê°„ë‹¨í•œ ì…¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³µì‚¬í•´ `gen_wave.sh`ë¡œ ì €ì¥í•˜ì‹­ì‹œì˜¤.

```sh
#!/bin/bash
angle=0
step_angle=24
sinval=0
cosval=0
PI=3.14159

while [ 1 ]
do
    ts=`date +"%s"`
    sinval=$(awk "BEGIN{ printf \"%.6f\", (sin($angle*($PI/180)))}")
    cosval=$(awk "BEGIN{ printf \"%.6f\", (cos($angle*($PI/180)))}")
    echo "wave.sin,$ts,$sinval"
    echo "wave.cos,$ts,$cosval"
    sleep 1
    angle=$((angle+step_angle))
done
```

### ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

ì‘ì„±í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•´ ë´…ë‹ˆë‹¤.

```sh
sh ./gen_wave.sh
```

ìŠ¤í¬ë¦½íŠ¸ëŠ” ë§¤ì´ˆ `wave.sin`, `wave.cos` ì´ë¦„ê³¼ í•¨ê»˜ ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„, ê°’ì„ CSV í˜•ì‹ìœ¼ë¡œ ì¶œë ¥í•©ë‹ˆë‹¤.
ì´ ì¶œë ¥ì€ `machbase-neo shell`ì—ì„œ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¢…ë£Œí•˜ë ¤ë©´ `Ctrl+C`ë¥¼ ëˆ„ë¥´ì‹­ì‹œì˜¤.

![wave-write-sh01](/images/wave-write-sh01.gif)

ì¶œë ¥ CSVì˜ ì»¬ëŸ¼ ìˆœì„œëŠ” í…Œì´ë¸” êµ¬ì¡°ì— ë§ì¶°ì•¼ í•©ë‹ˆë‹¤.

í…Œì´ë¸” êµ¬ì¡°ëŠ” ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```sh
machbase-neo shell desc EXAMPLE
```

`desc <table>` ì„œë¸Œì»¤ë§¨ë“œëŠ” í…Œì´ë¸” ì •ë³´ë¥¼ ë³´ì—¬ ì¤ë‹ˆë‹¤.

```
TABLE    EXAMPLE
TYPE     Tag Table
TAGS     wave.cos, wave.sin
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ # â”‚ NAME  â”‚ TYPE     â”‚ LENGTH â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1 â”‚ NAME  â”‚ varchar  â”‚    100 â”‚
â”‚ 2 â”‚ TIME  â”‚ datetime â”‚      8 â”‚
â”‚ 3 â”‚ VALUE â”‚ double   â”‚      8 â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

CSVë¥¼ í…Œì´ë¸”ì— ê°€ì ¸ì˜¬ ë•ŒëŠ” ì»¬ëŸ¼ ìˆœì„œì™€ ë°ì´í„° íƒ€ì…ì„ ë°˜ë“œì‹œ í…Œì´ë¸” ì •ì˜ì™€ ì¼ì¹˜ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.

### ìŠ¤í¬ë¦½íŠ¸ì™€ ëª…ë ¹ì–´ ê²°í•©

ì´ì œ ìŠ¤í¬ë¦½íŠ¸ ì¶œë ¥ì„ `machbase-neo shell` ì…ë ¥ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```sh
sh gen_wave.sh | machbase-neo shell import --timeformat=s EXAMPLE
```

{{< callout type="info">}}
**timeformat**<br/> machbase-neoëŠ” ëª¨ë“  íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ë‚˜ë…¸ì´ˆ ë‹¨ìœ„ë¡œ ë‹¤ë£¹ë‹ˆë‹¤.
í•˜ì§€ë§Œ ì…¸ ìŠ¤í¬ë¦½íŠ¸ëŠ” `date` ëª…ë ¹ìœ¼ë¡œ ì´ˆ ë‹¨ìœ„ íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ìƒì„±í•˜ë¯€ë¡œ
`--timeformat` ì˜µì…˜ìœ¼ë¡œ CSV ë°ì´í„°ì˜ ì‹œê°„ì´ ì´ˆ ë‹¨ìœ„ì„ì„ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.<br/>
ìì„¸í•œ ë‚´ìš©ì€ `machbase-neo shell help timeformat`ì„ ì°¸ê³ í•´ ì£¼ì„¸ìš”.
{{< /callout >}}

A each line of CSV that are generated by shell script is processed in `machbase-neo shell import` then "import" into `EXAMPLE` table.

ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì§ì ‘ ë°ì´í„°ë¥¼ ì…ë ¥í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```
echo "wave.pi,1674860125,3.141592" | machbase-neo shell import -t s EXAMPLE
```

or

```
echo "wave.pi,`date +%s`,3.141592" | machbase-neo shell import -t s EXAMPLE
```

ì´ì œ ìµœì‹  ê°’ì„ ì¡°íšŒí•´ ë³´ê² ìŠµë‹ˆë‹¤.

```sh
machbase-neo shell "select * from EXAMPLE where NAME='wave.pi' order by time desc limit 1"
```

![wave-write-sh02](/images/wave-write-sh02.gif)


## ë°ì´í„° ì½ê¸°

{{% steps %}}

### SQL ì¿¼ë¦¬

ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ ì¤‘ì¸ ë™ì•ˆ...

```sh
sh gen_wave.sh | machbase-neo shell import --timeformat=s EXAMPLE
``` 

SQL ì¿¼ë¦¬ë¡œ ë°ì´í„°ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

```sh
machbase-neo shell "select * from EXAMPLE order by time desc"
```

```
 #     NAME      TIME(UTC)            VALUE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 1     wave.sin  2023-01-28 14:03:59  0.214839
 2     wave.cos  2023-01-28 14:03:59  -0.976649
 3     wave.sin  2023-01-28 14:03:58  0.593504
 4     wave.cos  2023-01-28 14:03:58  -0.804831
  ...
```

![img](/images/shell-sql.gif)

ìœ„ ì˜ˆì œì—ì„œ `machbase-neo shell` ëª…ë ¹ì— `sql` ì„œë¸Œì»¤ë§¨ë“œë¥¼ ëª…ì‹œí•˜ì§€ ì•Šì•˜ì§€ë§Œ ì¿¼ë¦¬ê°€ ì •ìƒ ìˆ˜í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.
ì´ëŠ” ì¶”ê°€ ì¸ìë‚˜ ì˜µì…˜ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ì ìœ¼ë¡œ `sql` ì„œë¸Œì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë™ì‘ ë•Œë¬¸ì…ë‹ˆë‹¤.
ì¦‰, `machbase-neo shell "select..."`ëŠ” `machbase-neo shell sql "select..."`ì™€ ê°™ìŠµë‹ˆë‹¤.

ì˜µì…˜ì„ í•¨ê»˜ ì‚¬ìš©í•  ë•ŒëŠ” ì•„ë˜ì²˜ëŸ¼ `sql` ì„œë¸Œì»¤ë§¨ë“œë¥¼ ëª…ì‹œí•´ ì£¼ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

```sh
machbase-neo shell sql \
    --tz America/Los_Angeles \
    "select * from EXAMPLE order by time desc limit 4"
```

```
 #  NAME      TIME(AMERICA/LOS_ANGELES)  VALUE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 1  wave.sin  2023-01-28 06:03:59        0.214839
 2  wave.cos  2023-01-28 06:03:59        -0.976649
 3  wave.cos  2023-01-28 06:03:58        -0.804831
 4  wave.sin  2023-01-28 06:03:58        0.593504
```

machbaseëŠ” ì‹œê°„ì„ ê¸°ë³¸ì ìœ¼ë¡œ UTCë¡œ í‘œì‹œí•©ë‹ˆë‹¤.
ë‹¤ë¥¸ ì‹œê°„ëŒ€ë¡œ í‘œì‹œí•˜ë ¤ë©´ `--tz` ì˜µì…˜ì„ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.
`local` ë˜ëŠ” `Europe/Paris`ì™€ ê°™ì€ TZ ë°ì´í„°ë² ì´ìŠ¤ ë¬¸ìì—´ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```sh
machbase-neo shell sql \
    --tz local \
    "select * from EXAMPLE order by time desc limit 4"
```
```
 #  NAME      TIME(LOCAL)          VALUE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 1  wave.sin  2023-01-28 23:03:59  0.214839
 2  wave.cos  2023-01-28 23:03:59  -0.976649
 3  wave.cos  2023-01-28 23:03:58  -0.804831
 4  wave.sin  2023-01-28 23:03:58  0.593504
 ```

{{% /steps %}}

### Table view

It is also possible browsing query result forward/backward with "walk" command like below.

```sh
machbase-neo shell walk "select * from EXAMPLE order by time desc"
```

Then you can scroll up/down with keyboard, press `ESC` to exit table view.

Press `r` to re-execute query to refresh result, it is particularly useful with query was sorted by `order by time desc` to see the latest values when data is continuously being written.

![img](/images/shell-walk.gif)


### Query Output format

#### JSON

Use `--format json` option

```sh
machbase-neo shell sql \
    --format json \
    "select * from EXAMPLE order by time desc limit 4"
```

```json
{
  "data": {
    "columns": ["ROWNUM","NAME","TIME(UTC)","VALUE"],
    "types": ["string","string","datetime","double"],
    "rows": [
      [1,"wave.sin","2023-01-28 14:03:59",0.214839],
      [2,"wave.cos","2023-01-28 14:03:59",-0.976649],
      [3,"wave.cos","2023-01-28 14:03:58",-0.804831],
      [4,"wave.sin","2023-01-28 14:03:58",0.593504]
    ]
  }
}
```

#### CSV

Use `--format csv` option

```sh
machbase-neo shell sql  \
    --format csv \
    "select * from EXAMPLE order by time desc limit 4"
```

```
#,NAME,TIME(UTC),VALUE
1,wave.sin,2023-01-28 14:03:59,0.214839
2,wave.cos,2023-01-28 14:03:59,-0.976649
3,wave.cos,2023-01-28 14:03:58,-0.804831
4,wave.sin,2023-01-28 14:03:58,0.593504
```

Use `--no-heading` option to exclude the first line header 

```sh
machbase-neo shell sql \
    --format csv \
    --no-heading \
    "select * from EXAMPLE order by time desc limit 4"
```

```
1,wave.sin,2023-01-28 14:03:59,0.214839
2,wave.cos,2023-01-28 14:03:59,-0.976649
3,wave.cos,2023-01-28 14:03:58,-0.804831
4,wave.sin,2023-01-28 14:03:58,0.593504
```

### Query Time format

Use `--timeformat` option to specify time output format.

Execute `help timeformat` to display pre-defined formats and syntax for custom format.

```sh
machbase-neo shell help timeformat
```

#### Pre-defined timeformats

| Name          | Format                                    |
|:--------------|:------------------------------------------|
| Default,-     |    2006-01-02 15:04:05.999                |
| ns, us, ms, s | (UNIX epoch in nano-, milli-, micro-, seconds as int64) |
| Numeric       |    01/02 03:04:05PM '06 -0700             |
| RFC822        |    02 Jan 06 15:04 MST                    |
| RFC850        |    Monday, 02-Jan-06 15:04:05 MST         |
| RFC3339       |    2006-01-02T15:04:05Z07:00              |
| Kitchen       |    3:04:05PM                              |
| Stamp         |    Jan _2 15:04:05                        |
| ...(there are more)...       | Please consult `machbase-neo shell help timeformat` |

Try `--timeformat numeric` format.

```sh
machbase-neo shell sql \
    --timeformat numeric \
    "select * from example where name='wave.sin' order by time desc limit 1"
```

```
 #  NAME      TIME(UTC)                   VALUE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 1  wave.sin  01/28 02:03:59PM '23 +0000  0.214839
```

`-t` is a shorten alias of `--timeformat`

```sh
machbase-neo shell sql \
    -t ms \
    "select * from example where name='wave.sin' order by time desc limit 1"
```

```
 #  NAME      TIME(UTC)      VALUE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 1  wave.sin  1674914639000  0.214839
```

#### Custom time format

It is also possible your own custom format.

```sh
machbase-neo shell sql \
    --timeformat "2006.01.02 (15:04:05.000)" \
    "select * from example where name='wave.sin' order by time desc limit 1"
```

```
 #  NAME      TIME(UTC)                    VALUE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 1  wave.sin  "2023.01.28 (14:03:59.000)"  0.214839
```

| Value      | Symbol                                    |
|:-----------|:------------------------------------------|
| year       | 2006                                      |
| month      | 01                                        |
| day        | 02                                        |
| hour       | 03 or 15                                  |
| minute     | 04                                        |
| second     | 05 or with sub-seconds '05.999' or '05.000'|


#### Combine time format and time zone

```sh
machbase-neo shell sql \
    --tz Europe/Paris \
    --timeformat "2006.01.02 (15:04:05.000)" \
    "select * from example where name='wave.sin' order by time desc limit 1"
```

```
 #  NAME      TIME(EUROPE/PARIS)           VALUE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 1  wave.sin  "2023.01.28 (15:03:59.000)"  0.214839
```

{{< callout type="info" >}}
Since `s`,`ms`,`us` and `ns`  formats are represents UNIX epoch time. 
If one of these formats are used, `--tz` option is ignored.
Because epoch time is always in UTC.
{{< /callout >}}
